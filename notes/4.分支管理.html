<html>
<head>
  <title>4.分支管理</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="905"/>
<h1>4.分支管理</h1>

<div>
<span><div><font style="font-size: 14pt; color: rgb(173, 0, 0);"><b>分支</b></font></div><div><span style="font-size: 12pt;"><img src="4.分支管理_files/Image.png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 12pt;">1.主分支</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">在版本回退里，你已经知道，每次提交，Git都把它们串成一条时间线，这条时间线就是一个分支。</font></div><div><font style="font-size: 12pt;">截止到目前，只有一条时间线，在Git里，这个分支叫<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><b>主分支</b>，即master分支</span>。</font></div><div><font style="font-size: 12pt;">HEAD严格来说不是指向提交，而是指向master，<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">master才是指向提交的</span>，所以，<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">HEAD指向的就是当前分支。</span></font></div><div><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><font style="font-size: 12pt;">一开始的时候，master分支是一条线，Git用master指向最新的提交，</font></div><div><font style="font-size: 12pt;">再用HEAD指向master，就能确定当前分支，以及当前分支的提交点：</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">每次提交，master分支都会向前移动一步，这样，随着你不断提交，master分支的线也越来越长。</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">2.创建新的分支</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">当我们创建新的分支，例如dev时，Git新建了一个指针叫dev，指向master相同的提交，</font></div><div><font style="font-size: 12pt;">再把HEAD指向dev，就表示当前分支在dev上：</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">1.git checkout -b dev   创建并切换到分支dev</font></div><div><font style="font-size: 12pt;"> </font> <font style="font-size: 12pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;">git branch dev</font></div><div><font style="font-size: 12pt;"> </font> <font style="font-size: 12pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;">git checkout dev</font></div><div><font style="font-size: 12pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><br/></font></div><div><font style="font-size: 12pt;">2.git branch     查看当前分支，</font><font style="font-size: 12pt;">会列出所有分支，当前分支前面会标一个*号<font> </font>  </font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">3.git checkout master    切换回master分支</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">4.git merge dev   </font><font style="font-size: 12pt;"><font> </font>合并指定分支到当前分支</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">5</font><font style="font-size: 12pt;"><font>.</font>git branch -d dev    删除dev分支 </font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font color="#E30000" style="font-size: 12pt; background-color: rgb(255, 250, 165);-evernote-highlight:true;">所有checkout都可用switch代替 </font></div></div><div><span style="font-size: 12pt;"><img src="4.分支管理_files/Image [1].png" type="image/png" data-filename="Image.png"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">从现在开始，对工作区的修改和提交就是针对dev分支了，比如新提交一次后，</font></div><div><font style="font-size: 12pt;">dev指针往前移动一步，而master指针不变：</font></div></div><div><span style="font-size: 12pt;"><img src="4.分支管理_files/Image [2].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">3.</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">把dev合并到master上，直接把master指向dev的当前提交，就完成了合并：</font></div></div><div><span style="font-size: 12pt;"><img src="4.分支管理_files/Image [3].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="color: rgb(173, 0, 0); font-size: 14pt;"><b>解决冲突</b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">git switch -c feature1</font></div><div><font style="font-size: 12pt;">修改，提交</font></div><div><font style="font-size: 12pt;">git switch master</font></div><div><font style="font-size: 12pt;">修改，提交</font></div><div><font style="font-size: 12pt;">此时如下：</font></div></div><div><span style="font-size: 12pt;"><img src="4.分支管理_files/Image [4].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">git merge feature1</font></div><div><font style="font-size: 12pt;">此时，Git告诉我们，文件存在冲突，必须手动解决冲突后再提交。</font></div><div><font style="font-size: 12pt;">git status也可以告诉我们冲突的文件。</font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">修改文件，再提交，如下：</font></div></div><div><span style="font-size: 12pt;"><img src="4.分支管理_files/Image [5].png" type="image/png" data-filename="Image.png"/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>$ <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">git log --graph --pretty=oneline --abbrev-commit</span></div><div>*   cf810e4 (HEAD -&gt; master) conflict fixed</div><div>|\  </div><div>| * 14096d0 (feature1) AND simple</div><div>* | 5dc6824 &amp; simple</div><div>|/  </div><div>* b17d20e branch test</div><div>* d46f35e (origin/master) remove test.txt</div><div>* b84166e add test.txt</div><div>* 519219b git tracks changes</div><div>* e43a48b understand how stage works</div><div>* 1094adb append GPL</div><div>* e475afc add distributed</div><div>* eaadf4e wrote a readme file</div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">最后删除分支</font><font style="font-size: 12pt;">feature1 </font> </div><div><font style="font-size: 12pt;">git branch -d feature1  </font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div></span>
</div></body></html> 