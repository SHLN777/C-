<html>
<head>
  <title>05---用户管理</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="746"/>
<h1>05---用户管理</h1>

<div>
<span><div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0);">注：创建用户/删除用户/修改其它用户密码 的终端命令都需要通过sudo执行</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(173, 0, 0); font-weight: bold;">创建用户</span></font></div><div><span style="font-size: 12pt;"><img src="05---用户管理_files/Image.png" type="image/png" data-filename="Image.png"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; color: rgb(227, 0, 0);">如果创建时出错，删除用户，重新创建</span></div><div><span style="font-size: 12pt;"><img src="05---用户管理_files/Image [1].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(173, 0, 0);">查看创建的用户信息</span></span></span></div><div><span style="font-size: 12pt;"><img src="05---用户管理_files/Image [2].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">用户信息保存在：<font color="#E30000">/etc/passwd文件中</font></font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(173, 0, 0); font-weight: bold;">查看用户信息</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">1.id[用户名]：查看用户UID（用户代号）和GID（组代号）信息</font></div><div><font style="font-size: 12pt;">    <b>如果没有用户名，则查看当前用户的信息</b></font></div><div><font style="font-size: 12pt;">2.who：查看当前所有登录的用户列表</font></div><div><font style="font-size: 12pt;">3.whoami：查看当前登录用户的账户名</font></div></div><div><span style="font-size: 12pt;"><img src="05---用户管理_files/Image [3].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 12pt;"><img src="05---用户管理_files/Image [4].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 12pt;"><img src="05---用户管理_files/Image [5].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(173, 0, 0); font-weight: bold;">usermod</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">可以用来设置用户的主组/附加组和登录shell，命令格式如下：</font></div><div><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: Monaco;"><b>主组</b>：通常在新建用户时指定，在etc/passwd的第4列GID对应的组</span></div><div><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: Monaco;"><b>附加组</b>：在etc/group中最后一列表示该组的用户列表，用于指定用户的附加权限</span></div><div><span style="font-size: 12pt; font-family: Monaco;"><font color="#E30000"><b>设置了用户的附加组之后，需要重新登录才能生效</b></font></span></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">usermod -g 组 用户名   修改主组</font></div><div><font style="font-size: 12pt;">usermod -G 组 用户名   修改附加组</font></div><div><font style="font-size: 12pt;">usermod -s /bin/bash  修改用户登录shell</font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">uermod -G sudo 用户名</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">使用useradd添加的用户是没有权限使用sudo以root身份执行命令的，</font></div><div><font style="font-size: 12pt;">可以用以上命令添加到sudo附加组中</font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>指定用户登录shell</b></font></div><div><font style="font-size: 12pt;"><b><br/></b></font></div><div><font style="font-size: 12pt;">登录使用的Shell,就是登录之后，使用的终端命令，ubuntu默认是dash</font></div><div><font style="font-size: 12pt;">usermod -s /bin/dash 用户名</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><font style="color: rgb(173, 0, 0);"><b>which</b></font></span></div><ul><li><div><span style="font-size: 12pt;">/etc/passwd 是用于保存用户信息的<span style="font-size: 12pt; font-weight: bold;">文件</span></span></div></li><li><div><span style="font-size: 12pt;">/usr/bin/passwd 是用于修改用户密码的<span style="font-size: 12pt; font-weight: bold;">程序</span></span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">which命令可以查看执行命令所在位置，例如：</font></div><div><font style="font-size: 12pt;">which ls------/bin/ls</font></div><div><font style="font-size: 12pt;">which passwd------/usr/bin/passwd</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="05---用户管理_files/Image [6].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><font style="color: rgb(173, 0, 0);"><b>切换用户</b></font></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">1.su <font color="#AD0000"><b>-</b></font> 用户名 ：切换用户，并且切换目录，<b><font color="#AD0000">-</font></b>可以切换到用户家目录<br/></font></div><div><font style="font-size: 12pt;">2.exit ：退出当前登录账户</font></div></div><div><span style="font-size: 12pt;"><img src="05---用户管理_files/Image [7].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><font style="font-size: 12pt; color: rgb(173, 0, 0);"><b>修改文件权限</b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">1.chown  ：修改拥有者</font></div><div><font style="font-size: 12pt;">2.chgrp  ：修改组</font></div><div><font style="font-size: 12pt;">3.chmod  ：修改权限</font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">1.chown 用户名 文件名|目录名<br/></font></div><div><font style="font-size: 12pt;">2.chgrp -R 组名 文件名|目录名</font></div><div><font style="font-size: 12pt;">3.chmod -R 755 文件名|目录名</font></div><div><font style="font-size: 12pt;">    <font color="#E30000">chmod +/-rwx 文件名|目录名：直接修改读写权限，但是不能精确到 拥有者|组|其它</font><br/></font></div></div><div><span style="font-size: 12pt;"><img src="05---用户管理_files/Image [8].png" type="image/png" data-filename="Image.png"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div></div><div><br/></div></span>
</div></body></html> 