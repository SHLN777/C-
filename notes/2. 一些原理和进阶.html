<html>
<head>
  <title>2. 一些原理和进阶</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="899"/>
<h1>2. 一些原理和进阶</h1>

<div>
<span><div><font style="font-size: 14pt; color: rgb(173, 0, 0);"><b>工作区和暂存区</b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">.git是Git的版本库 ：</font></div><div><font style="font-size: 12pt;">其中最重要的就是称为stage的暂缓区</font></div><div><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: Monaco;">还有Git为我们自动创建的第一个分支master，以及指向master的一个指针HEAD</span></div></div><div><span style="font-size: 12pt;"><img src="2. 一些原理和进阶_files/Image.png" type="image/png" data-filename="Image.png"/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">前面讲了我们把文件往Git版本库里添加的时候，是分两步执行的：</font></div><div><font style="font-size: 12pt;">第一步是用git add把文件添加进去，实际上就是把文件修改添加到暂存区；</font></div><div><font style="font-size: 12pt;">第二步是用git commit提交更改，实际上就是把暂存区的所有内容提交到当前分支。</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">需要提交的文件修改通通放到暂存区，然后，一次性提交暂存区的所有修改</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 14pt; color: rgb(173, 0, 0);"><b>管理修改</b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">Git跟踪并管理的是修改，而非文件。</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">第一次修改 -&gt; git add -&gt; 第二次修改 -&gt; git commit</font></div><div><font style="font-size: 12pt;"><span>    </span>Git管理的是修改，当你用git add命令后，在工作区的第一次修改被放入暂存区，准备提交，</font></div><div><font style="font-size: 12pt;"><span>    </span>但是，在工作区的第二次修改并没有放入暂存区，所以，git commit只负责把暂存区的修改提交了</font></div><div><font style="font-size: 12pt;"><span>    </span>，也就是第一次的修改被提交了，第二次的修改不会被提交。</font></div><div><font style="font-size: 12pt;">第一次修改 -&gt; git add -&gt; 第二次修改 -&gt; git add -&gt; git commit</font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">git diff HEAD -- readme.txt   //查看工作区和版本库里面最新版本的区别</font><br/></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt; color: rgb(173, 0, 0);"><b>撤销修改</b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">git checkout -- 文件  //</font><font style="font-size: 12pt;">把文件在工作区的修改全部撤销（</font><font style="font-size: 12pt;">就是让这个文件回到最近一次git commit或git add时的状态</font><font style="font-size: 12pt;">）</font></div><div><font style="font-size: 12pt;">git reset HEAD 文件  //提交到暂缓区后，</font><font style="font-size: 12pt;">可以把暂存区的修改撤销掉（unstage），重新放回工作区：</font></div><div><font style="font-size: 12pt;">提交到版本库的话，需要版本回退</font></div><div><font style="font-size: 12pt;">但是</font><font style="font-size: 12pt;">把自己的<b>本地版本库</b>推送到<b>远程</b>，那就GG了。</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt; color: rgb(173, 0, 0);"><b>删除文件</b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 12pt;">在Git中，删除也是一个修改操作</font></span></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: Monaco;">rm 文件      //</span><font style="font-size: 12pt;">这个时候，Git知道你删除了文件，因此，工作区和版本库就不一致了</font></div><div><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: Monaco;">git status   //会告诉你那些文件被删除了</span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 12pt;"><br/></font></span></div><div><font style="font-size: 12pt;">现在有两个选择 ：</font></div><div><font style="font-size: 12pt;">一是确实要从版本库中删除该文件，那就用命令git rm删掉，并且git commit：</font></div><div><font style="font-size: 12pt;">另一种情况是删错了，因为版本库里还有呢，所以可以很轻松地把误删的文件恢复到最新版本：git checkout -- test.txt</font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">git checkout其实是用版本库里的版本替换工作区的版本，无论工作区是修改还是删除，都可以“一键还原”。</font></div><div><font color="#E30000" style="font-size: 12pt;">注意：从来没有被添加到版本库就被删除的文件，是无法恢复的！（可以回退到上一个版本）</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div></span>
</div></body></html> 