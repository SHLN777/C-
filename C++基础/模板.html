<html>
<head>
  <title>模板</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="608"/>
<h1>模板</h1>

<div>
<span><div><div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">一、友元函数</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><ol><li><div>友元全局函数</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 10pt;">class Coordinate</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 10pt;">{</font></span></div><div><span style="font-family: Monaco;"><font style="font-size: 10pt;">    <font color="#E30000">friend void printXY(Coordinate &amp;c);</font></font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 10pt;">public:</font></span></div><div><span style="font-family: Monaco;"><font style="font-size: 10pt;"><span style="color: rgb(51, 51, 51);">    </span>  <font color="#000000">  Coordinate(int x, int y);</font></font></span></div><div><br/></div><div><span style="font-size: 10pt; font-family: Monaco;"> private:</span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 10pt;">        int m_ix;</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 10pt;">        inr m_iY;</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 10pt;">};</font></span></div><div><br/></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 10pt;">void printXY(Coordinate &amp;c){</font></span></div><div><span style="font-family: Monaco;"><font style="font-size: 10pt;">    cout&lt;&lt;c.m_ix&lt;&lt;c,m_iY;        <font color="#E30000">#可以直接访问私有成员</font></font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 10pt;">}</font></span></div><div><br/></div><div><font style="font-size: 10pt;">int main(void)</font></div><div><font style="font-size: 10pt;">{</font></div><div><font style="font-size: 10pt;">    Coordinate coor(3,5);</font></div><div><font style="font-size: 10pt;">    printXY(coor);        <font color="#E30000">#带入对象名</font></font></div><div><font style="font-size: 10pt;">    return 0;</font></div><div><font style="font-size: 10pt;">}</font></div></div><div><br/></div><div>    2.友元成员函数</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 10pt;">class Coordinate</font></div><div><font style="font-size: 10pt;">{</font></div><div><font style="font-size: 10pt;">    friend void Circle::printXY(Coordinate &amp;c);</font></div><div><font style="font-size: 10pt;">public:</font></div><div><font style="font-size: 10pt;">        Coordinate(int x, int y);</font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;">private:</font></div><div><font style="font-size: 10pt;">        int m_ix;</font></div><div><font style="font-size: 10pt;">        inr m_iY;</font></div><div><font style="font-size: 10pt;">};</font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;">class Circle</font></div><div><font style="font-size: 10pt;">{</font></div><div><font style="font-size: 10pt;">public:</font></div><div><font style="font-size: 10pt;">        void printXY(Coordinate &amp;c){</font></div><div><font style="font-size: 10pt;">            cout&lt;&lt;c.m_ix&lt;&lt;c.m_iY;</font></div><div><font style="font-size: 10pt;">        }</font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;">};</font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;">int main(void)</font></div><div><font style="font-size: 10pt;">{</font></div><div><font style="font-size: 10pt;">    Coordinate coor(3,5);</font></div><div><font style="font-size: 10pt;">    Circle circle;</font></div><div><font style="font-size: 10pt;">    circle.printXY(coor);  </font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;">    system(&quot;pause&quot;);      </font></div><div><font style="font-size: 10pt;">    return 0;</font></div><div><font style="font-size: 10pt;">}</font></div></div><div><br/></div><div><br/></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">二、友元类</span></font></div><div><br/></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#E30000" style="font-size: 10pt;">class Circle;</font></div><div><font style="font-size: 10pt;">class Coordinate</font></div><div><font style="font-size: 10pt;">{</font></div><div><font style="font-size: 10pt;">    <font color="#E30000">friend Circle;</font></font></div><div><font style="font-size: 10pt;">public:</font></div><div><font style="font-size: 10pt;">    Coordinate(int x, int y);</font></div><div><br/></div><div><font style="font-size: 10pt;">private:</font></div><div><font style="font-size: 10pt;">    int m_ix;</font></div><div><font style="font-size: 10pt;">    int m_iY;</font></div><div><font style="font-size: 10pt;">};</font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;">class Circle</font></div><div><font style="font-size: 10pt;">{</font></div><div><font style="font-size: 10pt;">public:</font></div><div><font style="font-size: 10pt;">    Circle():m_coor()</font></div><div><font style="font-size: 10pt;">    {</font></div><div><font style="font-size: 10pt;">    </font></div><div><font style="font-size: 10pt;">    }</font></div><div><font style="font-size: 10pt;">    void printXY()</font></div><div><font style="font-size: 10pt;">    {</font></div><div><font style="font-size: 10pt;">        cout&lt;&lt;m_coor.m_iX&lt;&lt;m_coor.m_iY;</font></div><div><font style="font-size: 10pt;">    }</font></div><div><br/></div><div><font style="font-size: 10pt;">private:</font></div><div><font style="font-size: 10pt;">    Coordinate m_coor;</font></div><div><font style="font-size: 10pt;">};</font></div></div><div><br/></div><div>关于友元的注意事项：</div><ul><li><div>友元关系不可传递</div></li><li><div>友元关系的单向性（A是B的友元，B不是A的友元）</div></li><li><div>友元声明的形式及数量不受限制</div></li></ul><div>友元只是封装的补充</div><div><br/></div><div><br/></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">三、静态：static</span></font></div><div><br/></div><ol><li><div>静态数据成员&amp;静态成员函数（依赖类而不是对象）</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 10pt;">class Tank</font></div><div><font style="font-size: 10pt;">{</font></div><div><font style="font-size: 10pt;">public:</font></div><div><font style="font-size: 10pt;">    Tank()</font></div><div><font style="font-size: 10pt;">    {</font></div><div><font style="font-size: 10pt;">        s_iCount++;</font></div><div><font style="font-size: 10pt;">    }</font></div><div><font style="font-size: 10pt;">    ~Tank()</font></div><div><font style="font-size: 10pt;">    {</font></div><div><font style="font-size: 10pt;">        s_iCount--;</font></div><div><font style="font-size: 10pt;">    }</font></div><div><br/></div><div><font style="font-size: 10pt;">    <font color="#E30000">static</font> int getCount()</font></div><div><font style="font-size: 10pt;">    {</font></div><div><font style="font-size: 10pt;">        return s_iCount;</font></div><div><font style="font-size: 10pt;">    }</font></div><div><font style="font-size: 10pt;">    <font color="#E30000">static</font> int s_iCount;</font></div><div><font style="font-size: 10pt;">private:</font></div><div><font style="font-size: 10pt;">    string m_strCode;</font></div><div><font style="font-size: 10pt;">};</font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font color="#E30000" style="font-size: 10pt;">int Tank::s_iCount=0;</font></div></div><div><br/></div><div>    2.静态成员函数调用普通的数据成员</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 10pt;">class Tank</font></div><div><font style="font-size: 10pt;">{</font></div><div><font style="font-size: 10pt;">public:</font></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 10pt;">    static int getCount()</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 10pt;">    {</font></span></div><div><span style="font-family: Monaco;"><font style="font-size: 10pt;">      <font color="#FF0000">  m_strCode=&quot;01&quot;;  #错</font></font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 10pt;">        return s_iCount;</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 10pt;">    }</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 10pt;">private:</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 10pt;">    string m_strCode;</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 10pt;">    static int s_iCount;</font></span></div><div><font style="font-size: 10pt;">};</font></div></div><div><span style="color: rgb(227, 0, 0);">静态数据成员和成员函数都是随类的产生而产生</span></div><div><span style="color: rgb(227, 0, 0);">普通的数据成员是依赖于对象的</span></div><div><span style="color: rgb(227, 0, 0);">如果一个对象没产生，则调用失败</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#E30000" style="font-size: 11pt;">从this指针谈静态成员函数：</font></div><div><font color="#E30000" style="font-size: 11pt;"><br/></font></div><div><font color="#E30000" style="font-size: 11pt;">静态成员函数没有this指针，所以不知道是哪个对象的数据成员</font></div><div><font color="#E30000" style="font-size: 11pt;">而普通函数可以条用静态数据成员，因为静态成员函数不与对象相关，</font></div><div><font color="#E30000" style="font-size: 11pt;">是一个全局的变量，不用this区分</font></div></div><div><br/></div><div>注意事项：</div><ol><li><div>静态数据成员必须单独初始化，类产生之后就应该有一个初值</div></li><li><div>静态成员函数不能调用非静态成员函数和非静态数据成员，不能加const</div></li><li><div>静态数据成员只有一份，且不依赖对象而存在</div></li></ol><div><br/></div><div><br/></div><div><font color="#E30000" style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">四、一元运算符重载</span></font></div><div><font color="#E30000" style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">    一般将一元运算符重载为成员函数，二元为友元函数</span></font></div><div><font color="#E30000" style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">    []、()、=用成员函数</span></font></div><div><font color="#E30000" style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">    &lt;&lt;、&gt;&gt;用友元函数</span></font></div><div><br/></div><div>本质：函数重载</div><div>关键字：operator</div><div>注意：对内置的数据类型不能用运算符重载</div><div><br/></div><div>1. —</div><div><br/></div><div>成员函数重载</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 10pt;">class Coordinate</font></div><div><font style="font-size: 10pt;">{</font></div><div><font style="font-size: 10pt;">public:</font></div><div><font style="font-size: 10pt;">    Coordinate(int x, int y);</font></div><div><font style="font-size: 10pt;">    <font color="#E30000"><b>Corrdinate&amp; operator-();</b></font></font></div><div><font style="font-size: 10pt;">private:</font></div><div><font style="font-size: 10pt;">    int m_iX;</font></div><div><font style="font-size: 10pt;">    int m_iY;</font></div><div><font style="font-size: 10pt;">};</font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font color="#E30000" style="font-size: 10pt;">Coordinate&amp; Coordinate::operator-()</font></div><div><font color="#E30000" style="font-size: 10pt;">{</font></div><div><font color="#E30000" style="font-size: 10pt;">    m_iX = -m_iX;</font></div><div><font color="#E30000" style="font-size: 10pt;">    m_iY = -m_iY;</font></div><div><font color="#E30000" style="font-size: 10pt;">    <b>return *this;</b></font></div><div><font color="#E30000" style="font-size: 10pt;">} </font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#000000" style="font-size: 10pt;">int main(void)</font></div><div><font color="#000000" style="font-size: 10pt;">{</font></div><div><font color="#000000" style="font-size: 10pt;">    Coordinate coor1(3,5);</font></div><div><font style="font-size: 10pt;"><font color="#000000">   </font> <font color="#E30000"><b>-coor1;  //coor1.operator-();</b></font></font></div><div><br/></div><div><font color="#000000" style="font-size: 10pt;">    return 0'</font></div><div><font color="#000000" style="font-size: 10pt;">}</font></div></div><div><br/></div><div>友元函数重载</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 10pt;">class Coordinate</font></div><div><font style="font-size: 10pt;">{</font></div><div><font style="font-size: 10pt;">public:</font></div><div><font style="font-size: 10pt;">    Coordinate(int x, int y);</font></div><div><font style="font-size: 10pt;">    <font color="#E30000">friend Corrdinate&amp; operator-(Coordinate &amp;coor);</font></font></div><div><font style="font-size: 10pt;">private:</font></div><div><font style="font-size: 10pt;">    int m_iX;</font></div><div><font style="font-size: 10pt;">    int m_iY;</font></div><div><font style="font-size: 10pt;">};</font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font color="#E30000" style="font-size: 10pt;">Coordinate&amp; operator-(Coordinate &amp;coor)</font></div><div><font color="#E30000" style="font-size: 10pt;">{</font></div><div><font color="#E30000" style="font-size: 10pt;">    coor.m_iX = -coor.m_iX;</font></div><div><font color="#E30000" style="font-size: 10pt;">    coor.m_iY = -coor.m_iY;</font></div><div><font color="#E30000" style="font-size: 10pt;">    return *this;  //return coor;</font></div><div><font color="#E30000" style="font-size: 10pt;">}</font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>int main()</div><div>{</div><div>    Coordinate coor1(3,5)</div><div>    -coor1; //operator-(coor1);</div><div>    return 0;</div><div>}</div></div><div><br/></div><div><br/></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">2 . ++</span></font></div><div><br/></div><div>前置++符号重载</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">成员函数重载：</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">Coordinate operator++(Coordinate &amp;c1)</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">{</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    Coordinate c3;</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    c3.m_x = this-&gt;m_x + c1.m_x;</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    c3.m_y = this-&gt;m_y + c3.m_y;</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    return c3;</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">}</font></span></div><div><br/></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">友元运算符重载：</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">friend operator++(Coordinate &amp;c1, Coordinate &amp;c2);</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">{</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font><span style="font-size: 11pt;">    </span><font style="font-size: 11pt;">   </font></font></span><font style="font-size: 11pt;">Coordinate c3;</font></div><div><font style="font-size: 11pt;">    c3.m_x = c2.m_x + c1.m_x;</font></div><div><font style="font-size: 11pt;">    c3.m_y = c2.m_y + c3.m_y;</font></div><div><font style="font-size: 11pt;">    return c3;</font></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">}</font></span></div></div><div><br/></div><div><br/></div><div><br/></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">3 . 赋值运算符=</span></font></div><div>C++编译器至少给类添加四个默认函数</div><div>默认构造函数</div><div>默认析构函数</div><div>默认拷贝构造函数，对属性进行值拷贝</div><div><span style="font-size: 11pt;">赋值运算符operator=，对象给对象赋值是，对属性进行值拷贝</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">编译器提供的赋值运算符是浅拷贝</font></div><div><font style="font-size: 11pt;">当进行析构时会出现问题</font></div><div><font style="font-size: 11pt;">class Array</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">public:</font></div><div><font style="font-size: 11pt;">    Array(int age){</font></div><div><font style="font-size: 11pt;">        m_prt = new int(age);</font></div><div><font style="font-size: 11pt;">    }</font></div><div><font style="font-size: 11pt;">private:</font></div><div><font style="font-size: 11pt;">    int *m_prt;</font></div><div><font style="font-size: 11pt;">}</font></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><font style="font-size: 11pt;">int main()</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">    Array a1(10);</font></div><div><font style="font-size: 11pt;">    Array a2(20);</font></div><div><font style="font-size: 11pt;">    <font color="#E30000">a1 = a2;</font></font></div><div><font style="font-size: 11pt;">}</font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><font style="font-size: 11pt;">重写赋值运算符（深拷贝）</font></div><div><font style="font-size: 11pt;">class Array</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">public:</font></div><div><font style="font-size: 11pt;">    Array(int age){</font></div><div><font style="font-size: 11pt;">        m_prt = new int(age);</font></div><div><font style="font-size: 11pt;">    }</font></div><div><br/></div><div><font style="font-size: 11pt;">    <font color="#E30000">void operator=(Array &amp;p)</font></font></div><div><font style="font-size: 11pt;"><font color="#E30000"><span>    </span>{</font></font></div><div><font color="#E30000" style="font-size: 11pt;">        if(m_prt != NULL){</font></div><div><font color="#E30000" style="font-size: 11pt;">            delete m_prt;</font></div><div><font color="#E30000" style="font-size: 11pt;">            m_prt = NULL;</font></div><div><font color="#E30000" style="font-size: 11pt;">        }</font></div><div><font color="#E30000" style="font-size: 11pt;">        m_prt = new int(*p.m_prt);</font></div><div><font style="font-size: 11pt;"><font color="#E30000">    }</font></font></div><div><font style="font-size: 11pt;">private:</font></div><div><font style="font-size: 11pt;">    int *m_prt;</font></div><div><font style="font-size: 11pt;">}</font></div><div><font style="font-size: 11pt;">int main()</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">    Array a1(10);</font></div><div><font style="font-size: 11pt;">    Array a2(20);</font></div><div><font style="font-size: 11pt;">    a1 = a2;</font></div><div><font style="font-size: 11pt;">}</font></div><div><br/></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">Person&amp; operator=(Array &amp;p){</font></div><div><font style="font-size: 11pt;">        if(m_prt != NULL){</font></div><div><font style="font-size: 11pt;">            delete m_prt;</font></div><div><font style="font-size: 11pt;">            m_prt = NULL;</font></div><div><font style="font-size: 11pt;">        }</font></div><div><font style="font-size: 11pt;">        m_prt = new int(*p.m_prt);</font></div><div><font style="font-size: 11pt;">        return *this;</font></div><div><font style="font-size: 11pt;">    }</font></div><div><font style="font-size: 11pt;">则 a1=a2=a3;</font></div></div></div><div><br/></div><div><br/></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">4.关系运算符重载</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">class Person</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">public:</font></div><div><font style="font-size: 11pt;">    Person(sting name, int age)</font></div><div><font style="font-size: 11pt;">    {</font></div><div><font style="font-size: 11pt;">        m_Name = name;</font></div><div><font style="font-size: 11pt;">        m_Age = age;</font></div><div><font style="font-size: 11pt;">    }</font></div><div><font style="font-size: 11pt;">    </font></div><div><font style="font-size: 11pt;">    <font color="#E30000">bool operator==(Person &amp;p)</font></font></div><div><font color="#E30000" style="font-size: 11pt;">    {</font></div><div><font color="#E30000" style="font-size: 11pt;">        if(this-&gt;m_Name==p.m_Name &amp;&amp; this-&gt;m_Age==p.m_Age)</font></div><div><font color="#E30000" style="font-size: 11pt;">        {</font></div><div><font color="#E30000" style="font-size: 11pt;">            return true;</font></div><div><font color="#E30000" style="font-size: 11pt;">        }</font></div><div><font color="#E30000" style="font-size: 11pt;">        return false;</font></div><div><font style="font-size: 11pt;"><font color="#E30000">    }</font></font></div><div><br/></div><div><font style="font-size: 11pt;">private:</font></div><div><font style="font-size: 11pt;">    string m_Name;</font></div><div><font style="font-size: 11pt;">    int m_Age;</font></div><div><font style="font-size: 11pt;">};</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">void test01()</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">    Person p1(&quot;tom&quot;, 18)</font></div><div><font style="font-size: 11pt;">    Person p2(&quot;tom&quot;, 18)</font></div><div><font style="font-size: 11pt;">    if(p1==p2)</font></div><div><font style="font-size: 11pt;">    {</font></div><div><font style="font-size: 11pt;">        cout&lt;&lt;&quot;相等&quot;&lt;&lt;endl;</font></div><div><font style="font-size: 11pt;">    }</font></div><div><font style="font-size: 11pt;">    else</font></div><div><font style="font-size: 11pt;">    {</font></div><div><font style="font-size: 11pt;">        cout&lt;&lt;&quot;不相等&quot;&lt;&lt;endl;</font></div><div><font style="font-size: 11pt;">    }</font></div><div><font style="font-size: 11pt;">}</font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#E30000" style="font-size: 11pt;">bool operator!=(Person &amp;p)</font></div><div><font color="#E30000" style="font-size: 11pt;">    {</font></div><div><font color="#E30000" style="font-size: 11pt;">        if(this-&gt;m_Name==p.m_Name &amp;&amp; this-&gt;m_Age==p.m_Age)</font></div><div><font color="#E30000" style="font-size: 11pt;">        {</font></div><div><font style="font-size: 11pt; color: rgb(227, 0, 0);">            return false;</font></div><div><font color="#E30000" style="font-size: 11pt;">        }</font></div><div><font color="#E30000" style="font-size: 11pt;">        return true</font><font color="#E30000" style="font-size: 11pt;">;</font></div><div><font color="#E30000" style="font-size: 11pt;">    }</font></div><div><font color="#E30000" style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">if(p1 != p2)</font></div></div><div><br/></div><div><br/></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">5 . 函数调用运算符重载</span></font></div><div><br/></div><ul><li><div>函数调用运算符（），也可以重载</div></li><li><div>由于重载之后使用的方式非常像函数的调用，因此称为仿函数</div></li><li><div><span style="color: rgb(227, 0, 0);">仿函数没有固定的写法，非常灵活</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">class MyPrint</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">public:</font></div><div><font style="font-size: 11pt;">    void operator()(string text)</font></div><div><font style="font-size: 11pt;">    {</font></div><div><font style="font-size: 11pt;">        cout&lt;&lt;text&lt;&lt;endl;</font></div><div><font style="font-size: 11pt;">    }</font></div><div><font style="font-size: 11pt;">};</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">void test01()</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">    MyPrint myFunc;</font></div><div><font style="font-size: 11pt;">    myFunc(&quot;hello world&quot;);</font></div><div><font style="font-size: 11pt;">}</font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">int operator()(int num1, int num2)</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">    return num1+num2;</font></div><div><font style="font-size: 11pt;">}</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">void test01()</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">    MyPrint myFunc;</font></div><div><font style="font-size: 11pt;">    int ret = myFunc(10,20);</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">    //匿名函数对象</font></div><div><font style="font-size: 11pt;">    cout&lt;&lt;MyPrint()(10,20);</font></div><div><font style="font-size: 11pt;">}</font></div></div><div><br/></div><div><font style="font-size: 12pt;"><span style="color: rgb(227, 0, 0); font-size: 12pt; font-weight: bold;">6 .  []索引运算符</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div>    友元函数重载时，它的第一个参数可以是this指针，也可为其它值</div><div>    索引运算符第一个参数必须是this指针</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">int operator[](int index)</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">    if(index == 0)</font></div><div><font style="font-size: 11pt;">        return this-&gt;m_x;</font></div><div><font style="font-size: 11pt;">    if(index == 1)</font></div><div><font style="font-size: 11pt;">        return m_y;</font></div><div><font style="font-size: 11pt;">}</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">int main()</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">    Coordinate coor(1,2);</font></div><div><font style="font-size: 11pt;">    <font color="#E30000">cout&lt;&lt;coor[0]; //coor.operator[](0);</font></font></div><div><font style="font-size: 11pt;">}</font></div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div><div><br/></div></span>
</div></body></html> 