<html>
<head>
  <title>提高1---（泛型编程）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="616"/>
<h1>提高1---（泛型编程）</h1>

<div>
<span><div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">一、函数模板 </span></font></div><div><font style="font-size: 10pt;"><br/></font></div><div><span style="font-size: 10pt;">C++中另一种编程思想称为泛型编程，主要利用的技术就是模板</span></div><div><font style="font-size: 10pt;"><br/></font></div><div><span style="font-size: 10pt;">特点：</span></div><ul><li><div><span style="font-size: 10pt;">模板不可以直接使用，它只是一个框架</span></div></li><li><div>模板的通用并不是万能的</div></li></ul><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">语法：</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    template &lt;typename  T&gt;</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    template &lt;class  T&gt;</span></div><div><br/></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">T  max(T a, T b);</span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#E30000"><br/></font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#E30000">1.自动类型推导</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#E30000">int a,b = 1,2;</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#E30000">max(a,b);</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#E30000">2.显示指定类型</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#E30000">max&lt;int&gt;(a, b);   // 模板参数列表&lt;&gt;</font></span></div></div><div><font style="font-size: 10pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font><font style="font-size: 12pt;"><b>普通函数和函数模板的区别</b></font></font></span></div><div><br/></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">1.普通函数调用可以发生隐式类型转换</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">int  add(int a , int b);</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">int a=10;</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">char c='c' ;</font></span></div><div><span style="font-family: Monaco;"><font color="#147191" style="font-size: 11pt;">add(a, c) ----&gt;109</font></span></div><div><br/></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">2.函数模板 用自动类型推导，不可以发生隐式类型转换</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">template &lt;class T&gt;</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">T add(T a , T b);</font></span></div><div><font style="font-size: 11pt;">int a=10;</font></div><div><font style="font-size: 11pt;">char c='c';</font></div><div><font color="#147191" style="font-size: 11pt;">add(a, c)---&gt;错误，a、c类型不一样</font></div><div><font color="#1C3387" style="font-size: 11pt;"><br/></font></div><div><font color="#000000" style="font-size: 11pt;">3.显示指定类型，可以发生隐式类型转换</font></div><div><font color="#147191" style="font-size: 11pt;">add&lt;int&gt;(a, c)---&gt;109</font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco;"><font color="#E30000" style="font-size: 11pt;">int a = 'c' ;  //正确</font></span></div><div><span style="font-family: Monaco;"><font color="#E30000" style="font-size: 11pt;">int &amp;a = 'c' ; //错</font></span></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 12pt;"><b>调用规则：</b></font></span></div><div><br/></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">1..如果函数模板和普通函数都可以实现，优先调用普通函数</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    如果普通函数没有实现，则报错</span></div><div><br/></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">2.可以通过</span><span style="font-size: 11pt; font-family: Monaco;"><font color="#147191">空模板参数列表</font></span><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">来强制调用函数模板</span></div><div><span style="font-size: 11pt; font-family: Monaco;">    add<font color="#E30000">&lt;&gt;</font>(  );</span></div><div><br/></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">3.函数模板也可以发生重载</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    void  add(T a, T b);</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    void  add(T a, T b, T c);</span></div><div><br/></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">4.如果函数模板可以产生更好的匹配，优先调用函数模板</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    char  c1 = 'a';</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    char  c2 = 'b';</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    add(c1, c2);</span></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt; color: rgb(227, 0, 0); font-family: Monaco;">如果有函数模板，就不要用普通函数，否则容易出现二义性</span></div></div><div><font style="font-size: 10pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font><font style="font-size: 12pt;"><b>模板的局限性</b></font></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">对自定义的数据类型处理可能会出问题</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">利用具体化Person的版本实现代码，</span><span style="font-size: 11pt; font-family: Monaco;"><font color="#E30000">具体化优先调用</font></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">template&lt;&gt; bool add(Person &amp;a, Person &amp;b);  //模板的一个重载版本</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">1.利用具体化的模板，可以解决自定义类型的通用性</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">2.学习模板并不是为了写模板，而是在STL能够运用系统提供的模板</span></div></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">二、类模板</span></font></div><div><font style="font-size: 10pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">语法：</font></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    template &lt;class  nameType&gt;</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    class  Person</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    {</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">     private:</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">        nameType  name;</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    };</span></div><div><br/></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    Person&lt;string&gt; p1(&quot;xiaoming&quot;) ;</span></div></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font><font style="font-size: 12pt;"><b>类模板和函数模板的区别：</b></font></font></span></div><div><br/></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">1.类模板没有自动类型推导的使用方法</font></span></div><div><br/></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">2.类模板在模板参数列表中可以有默认参数</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    </font></span><font style="font-size: 11pt;">template &lt;class  nameType=int&gt;</font></div><div><font style="font-size: 11pt;">  Person p1(&quot;xiaoming&quot;);</font></div><div><br/></div></div><div><font style="font-size: 10pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 12pt;"><b>类模板中成员函数创建的时机</b></font></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">1.普通类中的成员函数一开始就可以创建</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">2.</span><span style="font-size: 11pt; font-family: Monaco;"><font color="#E30000">类模板中的成员函数在调用时才创建</font></span></div></div><div><font style="font-size: 10pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font><font style="font-size: 12pt;"><b>类模板对象做函数的参数</b></font></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">传参的方式：</font></div><div><font style="font-size: 11pt;">1.指定传入的类型  ---直接显示对象的数据类型</font></div><div><font style="font-size: 11pt;">    void add(<font color="#E30000">Person&lt;stirng&gt;&amp;p</font>);</font></div><div><font style="font-size: 11pt;">    Person &lt;string&gt;p(&quot;xiaoming&quot;);</font></div><div><font style="font-size: 11pt;">    add(p);</font></div><div><br/></div><div><font style="font-size: 11pt;">2.参数模板化  ---将对象中的参数变为模板进行传递</font></div><div><font style="font-size: 11pt;">    template&lt;class T&gt;</font></div><div><font style="font-size: 11pt;">    void add(<font color="#E30000">Person&lt;T&gt;&amp;p</font>)</font></div><div><font style="font-size: 11pt;">    {</font></div><div><font style="font-size: 11pt;">        cout&lt;&lt;typeid(T).name;</font></div><div><font style="font-size: 11pt;">    }</font></div><div><font style="font-size: 11pt;">    Person &lt;string&gt;p(&quot;xiao&quot;);</font></div><div><font style="font-size: 11pt;">    add(p);</font></div><div><br/></div><div><font style="font-size: 11pt;">3.整个类模板化  ---将这个对象类型 模板化进行传递</font></div><div><font style="font-size: 11pt;">    template&lt;class T&gt;</font></div><div><font style="font-size: 11pt;">    void add(<font color="#E30000">T &amp;p</font>)</font></div><div><font style="font-size: 11pt;">    {</font></div><div><font style="font-size: 11pt;">    typeid(T).name; //Person, string</font></div><div><font style="font-size: 11pt;">    }</font></div><div><font style="font-size: 11pt;">    Person&lt;string&gt;p(&quot;xiaoming&quot;);</font></div><div><font style="font-size: 11pt;">    add(p);</font></div></div><div><font style="font-size: 10pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 12pt;"><b>类模板与继承</b></font></span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">注意：</font></div><div><font style="font-size: 11pt;">当子类继承的父类是一个类模板时，子类在声明的时候，要指定出父类中T的类型</font></div><div><font style="font-size: 11pt;">如果不指定，编译器无法给子类分配内存</font></div><div><font style="font-size: 11pt;">如果想灵活指定出父类中T的类型，子类也需变为模板</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">class Son:public Base&lt;int&gt;</font></div><div><font style="font-size: 11pt;">{};</font></div><div><font color="#147191" style="font-size: 11pt;">Son s1; //可直接实例化一个对象</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">template&lt;class T1, class T2&gt;</font></div><div><font style="font-size: 11pt;">class Son2:public Base&lt;T2&gt; //T2传给父类，指明父类数据成员的类型，然后继承这个数据成员</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">    T1 obj;</font></div><div><font style="font-size: 11pt;">};</font></div><div><font color="#147191" style="font-size: 11pt;">Son2&lt;int,char&gt;s2; </font></div></div><div><font style="font-size: 10pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font><font style="font-size: 12pt;"><b>类模板成员函数类外实现</b></font></font></div><div><font><font style="font-size: 12pt;"><b><br/></b></font></font></div><div><font><font style="font-size: 12px;"><span style="font-size: 11pt;">template&lt;calss T&gt;</span></font></font></div><div><font><font style="font-size: 12px;"><span style="font-size: 11pt;">class Person</span></font></font></div><div><font><font style="font-size: 12px;"><span style="font-size: 11pt;">{</span></font></font></div><div><font><font style="font-size: 12px;"><span style="font-size: 11pt;">public:</span></font></font></div><div><font><font style="font-size: 12px;"><span style="font-size: 11pt;">    Person(T name);</span></font></font></div><div><font><font style="font-size: 12px;"><span style="font-size: 11pt;">private:</span></font></font></div><div><font><font style="font-size: 12px;"><span style="font-size: 11pt;">    T m;</span></font></font></div><div><font><font style="font-size: 12px;"><span style="font-size: 11pt;">};</span></font></font></div><div><font><font style="font-size: 12px;"><span style="font-size: 11pt;"><br/></span></font></font></div><div><font><font color="#147191" style="font-size: 12px;"><span style="font-size: 11pt;">template&lt;class T&gt;</span></font></font></div><div><font><font color="#147191" style="font-size: 12px;"><span style="font-size: 11pt;">Person&lt;T&gt;::Person(T name)</span></font></font></div><div><font><font style="font-size: 12px;"><span style="font-size: 11pt;">{</span></font></font></div><div><font><font style="font-size: 12px;"><span style="font-size: 11pt;">    m = name;</span></font></font></div><div><font><font style="font-size: 12px;"><span style="font-size: 11pt;">} </span></font></font></div><div><font><font style="font-size: 12px;"><span style="font-size: 11pt;"><br/></span></font></font></div><div><font><font style="font-size: 12px;"><span style="font-size: 11pt;"> <font color="#147191">int main()</font></span></font></font></div><div><font><font color="#147191" style="font-size: 12px;"><span style="font-size: 11pt;">{</span></font></font></div><div><font><font color="#147191" style="font-size: 12px;"><span style="font-size: 11pt;">    Person&lt;string&gt; p(&quot;xiaoming&quot;);</span></font></font></div><div><font><font color="#147191" style="font-size: 12px;"><span style="font-size: 11pt;">}</span></font></font></div></div><div><font style="font-size: 10pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 12pt;"><b>类模板分文件编写</b></font></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">问题：类模板中成员函数创建时机是在调用阶段，导致分文件编写时链接不到</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">解决：</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">        1.直接包含.cpp源文件</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">            因为类模板成员函数在调用的时候创建，所以包含 .h 时，创建不了函数</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">            所以，找不到构造函数和成员函数</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">            包含 .cpp文件时， .cpp里也有 .h ，所以可以看到 .h里的东西，也能看到 .cpp 里的东西</span></div><div><br/></div><div><br/></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">        2.将声明和实现写到同一个文件中，并更改后缀名为.hpp，hpp是约定的名称，并不是强制</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div></div><div><font style="font-size: 10pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>类模板与友元</b></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">全局函数类内实现 - 直接在类内声明友元即可</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">全局函数类外实现 - 需要提前让编译器知道全局函数的存在</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">template&lt;class T&gt;</font></div><div><font style="font-size: 11pt;">class Person</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">   <font color="#E30000"> friend void printx(Person&lt;T&gt; p)</font></font></div><div><font style="font-size: 11pt;">    {</font></div><div><font style="font-size: 11pt;">            cout&lt;&lt;p.m ;</font></div><div><font style="font-size: 11pt;">    }</font></div><div><font style="font-size: 11pt;">public:</font></div><div><font style="font-size: 11pt;">    Person(T name)</font></div><div><font style="font-size: 11pt;">    {m = name;}</font></div><div><font style="font-size: 11pt;">private:</font></div><div><font style="font-size: 11pt;">    T  m;</font></div><div><font style="font-size: 11pt;">};</font></div><div><font style="font-size: 11pt;">int main()</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">    Person&lt;string&gt; p(&quot;xiaoming&quot;);</font></div><div><font style="font-size: 11pt;">  <font color="#E30000">  printx(p);</font></font></div><div><font style="font-size: 11pt;">}</font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">template&lt;class T&gt;</font></div><div><font style="font-size: 11pt;">class Person;</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">template&lt;class T&gt;</font></div><div><font style="font-size: 11pt;">void printx(Person&lt;T&gt; p)</font></div><div><font style="font-size: 11pt;">{cout&lt;&lt;p.m ;</font><span style="font-size: 11pt;">}</span></div><div><span style="font-size: 11pt;"><br/></span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">template&lt;class T&gt;</font></div><div><font style="font-size: 11pt;">class Person</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;"> //<font color="#AD0000"><b>加空模板参数列表</b></font></font></div><div><font style="font-size: 11pt;"><font color="#AD0000"><b> //如果全局函数是类外实现，需要让编译器提前知道这个函数的存在</b></font></font></div><div><font style="font-size: 11pt;"><b> <font color="#E30000">friend void printx&lt;&gt;(Person&lt;T&gt; p);</font></b></font></div><div><font style="font-size: 11pt;">public:</font></div><div><font style="font-size: 11pt;">    Person(T name)</font></div><div><font style="font-size: 11pt;">    {m = name;}</font></div><div><font style="font-size: 11pt;">private:</font></div><div><font style="font-size: 11pt;">    T  m;</font></div><div><font style="font-size: 11pt;">};</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font color="#AD0000" style="font-size: 11pt;"><b>template&lt;class T&gt;</b></font></div><div><font color="#AD0000" style="font-size: 11pt;"><b>void printx(Person&lt;T&gt; p)</b></font></div><div><font color="#AD0000" style="font-size: 11pt;"><b>  {</b></font></div><div><font color="#AD0000" style="font-size: 11pt;"><b>    cout&lt;&lt;p.m ;</b></font></div><div><font color="#AD0000" style="font-size: 11pt;"><b>  }</b></font></div><div><font style="font-size: 11pt;">int main()</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">    Person&lt;string&gt; p(&quot;xiaoming&quot;);</font></div><div><font style="font-size: 11pt;">    <font color="#E30000">printx(p);</font></font></div><div><font style="font-size: 11pt;">}</font></div></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;"><br/></font></div></div><div><br/></div></span>
</div></body></html> 