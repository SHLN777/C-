<html>
<head>
  <title>基础---4（三大特性）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="621"/>
<h1>基础---4（三大特性）</h1>

<div>
<span><div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">一、封装</span></font></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">struct和class的区别：</font></span></div><div> </div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    struct默认权限为公共</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    class默认权限为私有</font></span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">成员属性设置为私有</font></div><div><font style="font-size: 11pt;">    1.可以自己控制读写权限</font></div><div><font style="font-size: 11pt;">    2.对于写权限，可以检测数据的有效性</font></div></div><div><br/></div><div><br/></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">二、对象特性</span></font></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">构造函数的分类和调用</font></div><div><font style="font-size: 11pt;">    两种类型：</font></div><div><font style="font-size: 11pt;">        按参数分为：有参构造、无参构造</font></div><div><font style="font-size: 11pt;">        按类型分为：普通构造、拷贝构造</font></div><div><font style="font-size: 11pt;">    三种调用方式：</font></div><div><font style="font-size: 11pt;">        括号法：Person p(10); Person p; </font></div><div><font style="font-size: 11pt;"><font color="#E30000">                Person p(); 被编译器认为是函数的声明</font></font></div><div><font style="font-size: 11pt;">        显示法：Person p = Person(10);</font></div><div><font style="font-size: 11pt;">                Person p1 = Person(p);</font></div><div><font style="font-size: 11pt;">                <font color="#E30000">Person(10); //匿名对象 特点：当前行执行结束后，系统会立即回收掉匿名对象</font></font></div><div><font style="font-size: 11pt;"><font color="#E30000">                Person (p); //编译器会认为Person (p) == Person p;</font></font></div><div><font style="font-size: 11pt;">        隐式转换法：</font></div><div><font style="font-size: 11pt;">                Person p4 = 1; //相当于 Person p4 = person(10);</font></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">拷贝构造函数</font></span></div><div><br/></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">调用时机：</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    1.使用一个已经创建的完毕的对象来初始化一个新对象</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    2.值传递的方式给函数参数传值</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    3.以值方式返回局部对象</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">            Person  func()</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">            {</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">                Person p1;</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">                return p1;   //创建一个临时对象接收p1的值，然后返回</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">            }</font></span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">深拷贝和浅拷贝</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">浅拷贝：简单的赋值拷贝操作</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">深拷贝：在堆区重新申请空间，进行拷贝操作</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    private: int *p</span></div><div><br/></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    Person(int  num)</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    {</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">        p = new int(num)</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    }</span></div><div><br/></div><div><span style="font-size: 11pt; font-family: Monaco;">  <font color="#1C3387">  Person (const Person  &amp;arr)</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#1C3387">    {</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#1C3387">        p = new int(10)</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#1C3387">    }</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#E30000">如果属性有在堆区开辟的，一定要自己提供拷贝构造函数，防止浅拷贝带来的问题 </font>   <span style="color: rgb(51, 51, 51);">    </span></span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">类（A）对象作为类（B）成员</font></div><div><font style="font-size: 11pt;">构造时先构造类（A）对象</font></div><div><font style="font-size: 11pt;">析构时先B后A</font></div><div><font style="font-size: 11pt;">初始化列表</font></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">对象模型</font></div><div><font style="font-size: 12pt;">成员函数和成员变量分开存储</font></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">类内的成员函数和成员变量分开存储</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">只有非静态成员变量才属于类的对象上</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">C++编译器会给每个空对象也分配一个字节空间，是为了区分空对象占内存的位置</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">每个空对象也应该有一个独一无二的内存地址</span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#1C3387">class Person</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#1C3387">{</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#1C3387"><br/></font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#1C3387">};</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#1C3387">Person  p;</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#1C3387">sizeof(p) ; //等于1</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#1C3387"><br/></font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#6A0081">class Person</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#6A0081">{</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#6A0081">public:</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#6A0081">    int m;</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#6A0081">};</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#6A0081">Person p1;</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#6A0081">sizeof(p1); //等于4</font></span></div></div><div><span style="font-size: 10pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">this指针（本质是指针常量，指向不能修改）</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">Person&amp; func(Person &amp;p)</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">    this-&gt;age += p.age;</font></div><div><font style="font-size: 11pt;">    return *this;</font></div><div><font style="font-size: 11pt;">}</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">int main()</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">    Person p(1);</font></div><div><font style="font-size: 11pt;">    Person p1(2);</font></div><div><font style="font-size: 11pt;">    p1.func(p).func(p).func(p);</font></div><div><font style="font-size: 11pt;">    return 0;</font></div><div><font style="font-size: 11pt;">}</font></div></div><div><span style="font-size: 10pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font><font style="font-size: 12pt;">空指针访问成员函数</font></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">C++中空指针也可以调用成员函数，但是也要注意有没有用到this指针</font></div><div><font style="font-size: 11pt;">如果用到this指针，需要加以判断保证代码的健壮性</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">void func1()</font></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">{</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    cout&lt;&lt;&quot;hhh&quot;&lt;&lt;endl;</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">}</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">void func2( )</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">{</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    cout&lt;&lt;this-&gt;m_ix&lt;&lt;endl;</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">}</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#E30000">Person  *p = NULL;</font></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">p.func1(); //可以</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">p.func2(); //不行，传入的指针为空</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">解决：</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    void func2()</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    {</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">        if(this ==NULL)</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">        {</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">            return;</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">        }</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">        cout&lt;&lt;m_ix&lt;&lt;endl;</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    }</span></div></div><div><span style="font-size: 10pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font><font style="font-size: 12pt;">const修饰成员函数</font></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">1.成员函数后加const，称为常函数</font></div><div><font style="font-size: 11pt;">2.常函数内不可以修改成员属性</font></div><div><font style="font-size: 11pt;">3.成员属性声明时加关键字mutable后，在常函数中依然可以修改</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">void func(Person* const this, )const; //其实修饰的是this指针</font></div><div><font style="font-size: 11pt;">void func(const Person* const this, )</font></div></div><div><span style="font-size: 10pt;"><br/></span></div><div><span style="font-size: 10pt;"><br/></span></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">三、继承</span></font></div><div><span style="font-size: 10pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">父类中所有的非静态成员属性都会被子类继承下去</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">父类中私有成员属性，是被编译器给隐藏了，因此是访问不到的，</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">但是</span><span style="font-family: Monaco; font-size: 11pt;">确实被继承下去</span></div></div><div><span style="font-size: 10pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">子类继承父类后，当创建子类对象，也会调用父类的构造函数</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">父类构造--&gt;子类构造--&gt;子类构造--&gt;父类构造</font></div></div><div><span style="font-size: 10pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">1.子类对象可以直接访问到子类中的同名函数</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">2.子类对象家作用域可以访问到父类同名函数</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">3.成员函数也是如此</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">4.同名静态成员也一样</span></div></div><div><span style="font-size: 10pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">同名静态成员</font></span></div><div><br/></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">clas Base</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">{</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    static  m;</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">};</font></span></div><div><font style="font-size: 11pt;">clas Son</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">    static m;</font></div><div><font style="font-size: 11pt;">};</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font color="#E30000" style="font-size: 11pt;">Son s;</font></div><div><font color="#E30000" style="font-size: 11pt;">s.m;</font></div><div><font color="#E30000" style="font-size: 11pt;">s.Base::m;</font></div><div><font color="#E30000" style="font-size: 11pt;">Son::m;</font></div><div><font color="#E30000" style="font-size: 11pt;">Son::Base::m; //第一个::代表通过类名方式访问</font></div><div><font color="#E30000" style="font-size: 11pt;">                第二个::代表访问父类作用域下</font></div><div><span style="font-size: 11pt; color: rgb(227, 0, 0); font-family: Monaco;">Base::m;</span></div></div><div><span style="font-size: 10pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">多继承中继承的同名数据，要加作用域区分</span></div></div><div><span style="font-size: 10pt;"><br/></span></div><div><span style="font-size: 10pt;"><br/></span></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: Monaco; font-weight: bold;">四、多态</span></font></div><div><span style="font-size: 10pt;"><br/></span></div><ul><li><div>静态多态：函数重载和运算符重载</div></li><li><div>动态多态：派生类和虚基类实现云信使多态</div></li></ul><div><br/></div><div>区别：</div><ul><li><div>静态多态的函数地址早绑定，编译阶段确定函数地址</div></li><li><div>动态多态的函数地址晚绑定，运行阶段确定函数地址</div></li></ul><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">Cat继承Animal</span></div><div><br/></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">void  func(Animal  &amp;a)</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">{</span></div><div><span style="font-size: 11pt; font-family: Monaco;">    a.speak();    <font color="#E30000">//地址早绑定  </font></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">}</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">Cat cat;</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">func(cat);</span></div></div><div><span style="font-size: 10pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">动态多态满足条件：</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">1.有继承关系</font></div><div><font style="font-size: 11pt;">2.子类重写父类的虚函数</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">动态多态使用：</font></div><div><font style="font-size: 11pt;">父类的指针或者引用，指向子类对象</font></div><div><font color="#AD0000" style="font-size: 11pt;">（如果子类赋值给父类，父类不是指向子类）</font></div></div><div><span style="font-size: 10pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#FF0000" style="font-size: 11pt;">有同名虚函数，在子类虚函数表中将父类的虚函数的函数地址<b>覆盖</b></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><font color="#E30000">父类中有虚函数表指针，子类继承</font>后，指向自己的虚函数表</font></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#E30000">也就是，子类中的虚函数表 内部 会替换成子类的虚函数地址</font></span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">纯虚析构函数（需要声明，也需要实现，普通的纯虚函数只需要声明）</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">有纯虚析构函数之后，这个类也属于抽象类，无法实例化对象</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">class  Animal</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">{</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    virtual  ~Animal()=0;</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">};</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">Animal::~Animal()</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">{</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    </span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">}</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">class  Cat</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">{</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">  ~Cat();</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">};</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#E30000">1.虚析构和纯虚析构就是用来解决通过父类指针释放子类对象</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#E30000">2.如果子类中没有堆区数据，可以不写为虚析构或纯虚析构</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#E30000">3.拥有纯虚析构函数的类也属于抽象类</font></span></div></div><div><span style="font-size: 10pt;"><br/></span></div><div><span style="font-size: 10pt;"><br/></span></div><div><span style="color: rgb(20, 113, 145); font-size: 14pt;">例1</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">class  Drink</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">{</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">public:</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    virtual       void    func1()  =  0;</font></span></div><div><font style="font-size: 11pt;"><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font>    </font></span>virtual  </font><font style="font-size: 11pt;">void</font><font style="font-size: 11pt;">  func1() = 0;</font></div><div><font style="font-size: 11pt;">  virtual  void  func1() = 0;</font></div><div><font style="font-size: 11pt;">  virtual  void  func1() = 0;</font></div><div><font style="font-size: 11pt;">  </font></div><div><font color="#1C3387" style="font-size: 11pt;">  void make()</font></div><div><font color="#1C3387" style="font-size: 11pt;">    {</font></div><div><font color="#1C3387" style="font-size: 11pt;">        func1();</font></div><div><font color="#1C3387" style="font-size: 11pt;">        func2();</font></div><div><font color="#1C3387" style="font-size: 11pt;">        func3();</font></div><div><font color="#1C3387" style="font-size: 11pt;">        func4();</font></div><div><font style="font-size: 11pt;"><font color="#1C3387">    }</font></font></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">};</font></span></div><div><br/></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">class Tea</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">{</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font><span style="font-size: 11pt;">  </span> <font style="font-size: 11pt;"> void </font></font></span><font style="font-size: 11pt;">func1()</font></div><div><font style="font-size: 11pt;">    {count&lt;&lt;&quot;&quot;;}</font></div><div><font style="font-size: 11pt;">  void func2()</font></div><div><font style="font-size: 11pt;">    {cout&lt;&lt;&quot;&quot;;}</font></div><div><font style="font-size: 11pt;">  void func3()</font></div><div><font style="font-size: 11pt;">    {cout&lt;&lt;&quot;&quot;;}</font></div><div><font style="font-size: 11pt;">  void func4()</font></div><div><font style="font-size: 11pt;">    {cout&lt;&lt;&quot;&quot;;}</font></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">};</font></span></div><div><br/></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#000000">void  makeDrink(Drink * drink)</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#000000">{</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#000000">    drink-&gt;make();</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#000000">    delete  drink;</font></span></div><div><span style="font-size: 11pt; font-family: Monaco;"><font color="#000000">}</font></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">void  test01()</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">{</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    makeDrink(new  Tea);</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">}</span></div></div><div><span style="font-size: 10pt;"><br/></span></div><div><span style="font-size: 10pt;"><br/></span></div><div><span style="color: rgb(20, 113, 145); font-size: 14pt;">例2</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 11pt;">class CPU</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">public:</font></div><div><font style="font-size: 11pt;">    virtual void calculate() = 0;</font></div><div><font style="font-size: 11pt;">};</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">class VideoCard</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">public:</font></div><div><font style="font-size: 11pt;">    virtual void display() = 0;</font></div><div><font style="font-size: 11pt;">};</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">class Memoty</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">public:</font></div><div><font style="font-size: 11pt;">    virtual void storage() = 0;</font></div><div><font style="font-size: 11pt;">};</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><b>class Computer</b></font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">public:</font></div><div><font style="font-size: 11pt;">    Compute(CPU * cpu, VideoCard * vc, Memory * mem)</font></div><div><font style="font-size: 11pt;">    {</font></div><div><font style="font-size: 11pt;">        cpu=cpu;</font></div><div><font style="font-size: 11pt;">        vc=vc;</font></div><div><font style="font-size: 11pt;">        mem=mem;</font></div><div><font style="font-size: 11pt;">    }</font></div><div><font style="font-size: 11pt;">    void work()</font></div><div><font style="font-size: 11pt;">    {</font></div><div><font style="font-size: 11pt;">        cpu-&gt;calculate();</font></div><div><font style="font-size: 11pt;">        vc-&gt;display();</font></div><div><font style="font-size: 11pt;">        mem-&gt;storage();</font></div><div><font style="font-size: 11pt;">    }</font></div><div><font style="font-size: 11pt;">  <font color="#E30000">  ~Computer()</font></font></div><div><font color="#E30000" style="font-size: 11pt;">    {</font></div><div><font color="#E30000" style="font-size: 11pt;">        if(cpu != NULL)</font></div><div><font color="#E30000" style="font-size: 11pt;">        {</font></div><div><font color="#E30000" style="font-size: 11pt;">            delete cpu;</font></div><div><font color="#E30000" style="font-size: 11pt;">            cpu = NULL;</font></div><div><font color="#E30000" style="font-size: 11pt;">        }</font></div><div><font color="#E30000"><span style="font-size: 11pt;"> </span><font style="font-size: 11pt;">       </font></font><font color="#E30000" style="font-size: 11pt;">if(vc != NULL)</font></div><div><font color="#E30000" style="font-size: 11pt;">        {</font></div><div><font color="#E30000" style="font-size: 11pt;">            delete vc;</font></div><div><font color="#E30000" style="font-size: 11pt;">            vc = NULL;</font></div><div><font color="#E30000" style="font-size: 11pt;">        }</font></div><div><font color="#E30000" style="font-size: 11pt;">        if(mem != NULL)</font></div><div><font color="#E30000" style="font-size: 11pt;">        {</font></div><div><font color="#E30000" style="font-size: 11pt;">            delete mem;</font></div><div><font color="#E30000" style="font-size: 11pt;">            mem = NULL;</font></div><div><font color="#E30000" style="font-size: 11pt;">        }</font></div><div><font color="#E30000" style="font-size: 11pt;">    }</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">private:</font></div><div><font style="font-size: 11pt;">    CPU * cpu;</font></div><div><font style="font-size: 11pt;">    VideoCard * vc;</font></div><div><font style="font-size: 11pt;">    Memory * mem;</font></div><div><font style="font-size: 11pt;">};</font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">class  InterCPU : public  CPU</font></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">{</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">public:</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    virtual  void  calculate()</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    {</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">        cout&lt;&lt;&quot;intercpu&quot;;</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">    }</span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;">};</span></div><div><br/></div><div><font style="font-size: 11pt;">class  InterVideoCard : public  VideoCard</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">public:</font></div><div><font style="font-size: 11pt;">    virtual  void  display()</font></div><div><font style="font-size: 11pt;">    {</font></div><div><font style="font-size: 11pt;">        cout&lt;&lt;&quot;intervideocard&quot;;</font></div><div><font style="font-size: 11pt;">    }</font></div><div><font style="font-size: 11pt;">};</font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;">class  InterMemory : public  Memory</font></div><div><font style="font-size: 11pt;">{</font></div><div><font style="font-size: 11pt;">public:</font></div><div><font style="font-size: 11pt;">    virtual  void  storage()</font></div><div><font style="font-size: 11pt;">    {</font></div><div><font style="font-size: 11pt;">        cout&lt;&lt;&quot;intermemory&quot;;</font></div><div><font style="font-size: 11pt;">    }</font></div><div><font style="font-size: 11pt;">};</font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">void  test()</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">{</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    CPU * intercpu = new InterCPU;</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    VideoCard * intercard = new InterVideoCard;</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    Memory * intermem = new InterMemory;</font></span></div><div><br/></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    Computer * computer = new Computer(intercpu, intercard, intermem);</font></span></div><div><span style="font-family: Monaco;"><font style="font-size: 11pt;">    //<font color="#E30000">或者 </font></font></span><font color="#E30000"><font style="font-size: 11pt;">Computer * computer = new Computer(new InterCPU,</font><font style="font-size: 11pt;">new InterVideoCard,</font><font style="font-size: 11pt;">new InterMemory</font><font style="font-size: 11pt;">);</font></font></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    computer-&gt;work();</font></span></div><div><br/></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">    delete  computer;</font></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 11pt;">}</font></span></div></div><div><span style="font-size: 10pt;"><br/></span></div><div><span style="font-size: 10pt;"><br/></span></div><div><span style="font-size: 10pt;"><br/></span></div><div><span style="font-size: 10pt;"><br/></span></div><div><span style="font-size: 10pt;"><br/></span></div><div><span style="font-size: 10pt;"><br/></span></div><div><span style="font-size: 10pt;"><br/></span></div><div><span style="font-size: 10pt;"><br/></span></div><div><span style="font-size: 10pt;"><br/></span></div><div><span style="font-size: 10pt;"><br/></span></div></div><div><br/></div></span>
</div></body></html> 